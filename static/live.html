<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>rtmp拉数据流</title>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.3.0/alt/video-js-cdn.css">
  <style>
    body{ margin: 0;}
    .video-js{ width: 100%; height: 600px;}
    </style>
</head>

<body>
  <video muted id=example-video width=360 height=300 class="video-js vjs-default-skin vjs-big-play-centered" autoplay="true" controls onclick="touch()">
    <source type="application/x-mpegURL">
  </video>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="http://vjs.zencdn.net/ie8/1.1.1/videojs-ie8.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.3.0/video.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.14.1/videojs-contrib-hls.min.js"></script>
<script>
  window.setURL = function () {
    var url = location.href;
    var urlStr = url.slice(url.indexOf('?') + 1);
    var arr = urlStr.split('&');
    var obj = {}
    arr.forEach(function(element, index) {
      var list = element.split('=');
      obj[list[0]] = list[1]
    })
    return obj || ''
  }
  var urlObj = setURL()
  $(function() {
    $('.video-js').css('height', urlObj.height + 'px')
    $('#example-video').children('source').attr('src', urlObj.source);
    var player = videojs('example-video');
  })
  function changeHeight () {
    console.log('height');
  }
  function touch () {
    // 调取vue 的全局方法
    window.parent.select(urlObj.page)
  }
</script>

</html>
